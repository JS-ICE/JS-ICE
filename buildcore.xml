<project name="JS-ICE" default="checkJs" basedir=".">

  <target name="checkJs" id="checkJs">

    <property name="classlist"  
      description="Class list generated by java2script classloader to be bundled into corefile - default is " 
      value="_j2sclasslist.txt" />
  	
  	<loadresource property="js.files">
      <file file="srcjs/imports"/>
    </loadresource>

  	<concat destfile="test/tmp.js">
        <fileset dir="srcjs/Js">
          <include name="**/*.js" />
        </fileset>
    </concat>
    <antcall target="call-core">
      <param name="call-core.name" value="all" />
    </antcall>  
  </target>


  <target name="call-core" id="call-core">
    <echo>......Generating test/{call-core.name}.js</echo>
    <concat destfile="test/${call-core.name}.js">
      <filelist dir="srcjs" files="
	   		../test/coretop.js
	   		${js.files}
	   		../test/corebottom.js
	   		" />
    </concat>
    <java jar="tools/closure_compiler.jar" fork="true" dir="." failonerror="true" >
      <arg line="--warning_level VERBOSE --js test/${call-core.name}.js --js_output_file test/${call-core.name}.z.js" />
    </java>
  </target>



</project>
